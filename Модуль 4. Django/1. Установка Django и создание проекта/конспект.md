# Урок 1: Введение в Django

## Что такое Django?

Django — это высокоуровневый веб-фреймворк на языке Python, который позволяет быстро и эффективно разрабатывать веб-приложения. Он следует принципу "Don't Repeat Yourself" (DRY) и "Convention over Configuration", что делает его очень удобным для использования. Django предоставляет множество встроенных инструментов и библиотек, которые упрощают разработку, такие как ORM (Object-Relational Mapping) для работы с базами данных, система маршрутизации (URL routing), шаблонизатор для генерации HTML и встроенная админка для управления данными.

### Для чего используется Django?

Django используется для создания веб-сайтов и веб-приложений. Он предоставляет множество встроенных инструментов и библиотек, которые упрощают разработку, такие как:

- **ORM (Object-Relational Mapping)**: Позволяет работать с базами данных через Python-код, абстрагируясь от SQL-запросов.
- **Система маршрутизации (URL routing)**: Упрощает управление URL-адресами и их сопоставление с представлениями.
- **Шаблонизатор**: Позволяет генерировать HTML-страницы с использованием Python-кода.
- **Встроенная админка**: Предоставляет готовый интерфейс для управления данными в базе данных.

### Архитектура MTV

Django следует архитектуре MTV (Model-Template-View), которая аналогична архитектуре MVC (Model-View-Controller). Давайте разберем каждый компонент:

- **Model (Модель)**: Описывает данные и их структуру. В Django модели определяются в виде Python-классов.
- **Template (Шаблон)**: Отвечает за представление данных. Шаблоны в Django — это HTML-файлы с вставками Django-кода.
- **View (Представление)**: Обрабатывает запросы и возвращает ответы. Представления в Django — это Python-функции или классы.

#### Пример модели

```python
from django.db import models

class Article(models.Model):
    title = models.CharField(max_length=200)
    content = models.TextField()
    published_date = models.DateTimeField(auto_now_add=True)
```

**Объяснение:**
- `Article` — это модель, которая представляет статью.
- `title` — поле для заголовка статьи, максимальная длина 200 символов.
- `content` — поле для текста статьи.
- `published_date` — поле для даты публикации статьи, автоматически устанавливается при создании записи.

#### Пример шаблона

```html
<!DOCTYPE html>
<html>
<head>
    <title>{{ article.title }}</title>
</head>
<body>
    <h1>{{ article.title }}</h1>
    <p>{{ article.content }}</p>
</body>
</html>
```

**Объяснение:**
- `{{ article.title }}` и `{{ article.content }}` — это вставки Django, которые будут заменены значениями полей `title` и `content` модели `Article`.

#### Пример представления

```python
from django.shortcuts import render
from .models import Article

def article_detail(request, article_id):
    article = Article.objects.get(id=article_id)
    return render(request, 'article_detail.html', {'article': article})
```

**Объяснение:**
- `article_detail` — это представление, которое принимает запрос и идентификатор статьи.
- `Article.objects.get(id=article_id)` — получает статью из базы данных по идентификатору.
- `render(request, 'article_detail.html', {'article': article})` — рендерит шаблон `article_detail.html` с переданной статьей.

## Создание проекта

### Что такое Django проект?

Django проект — это контейнер для всех приложений и настроек, которые составляют ваше веб-приложение. Проект включает в себя конфигурационные файлы, такие как `settings.py`, `urls.py` и `wsgi.py`, а также директорию для хранения статических файлов и шаблонов. Проект служит основой для всех приложений, которые вы создаете.

### Создание репозитория

1. **Создайте репозиторий на GitHub**:
   - Перейдите на GitHub и создайте новый репозиторий с именем `itg`.

2. **Склонируйте репозиторий на локальную машину**:
   ```sh
   git clone https://github.com/yourusername/itg.git
   cd itg
   ```

### Установка зависимостей

1. **Создайте виртуальное окружение**:
   ```sh
   python -m venv venv
   ```

2. **Активируйте виртуальное окружение**:
   - На Linux/MacOS:
     ```sh
     source venv/bin/activate
     ```
   - На Windows:
     ```sh
     .\venv\Scripts\activate.bat
     ```

3. **Установите Django**:
   ```sh
   pip install django
   ```

4. **Сохраните зависимости в файл `requirements.txt`**:
   ```sh
   pip freeze > requirements.txt
   ```

### Развертывание проекта на локальной машине

#### Через командную строку

1. **Склонируйте репозиторий**:
   ```sh
   git clone https://github.com/yourusername/itg.git
   cd itg
   ```

2. **Создайте виртуальное окружение**:
   ```sh
   python -m venv venv
   ```

3. **Активируйте виртуальное окружение**:
   - На Linux/MacOS:
     ```sh
     source venv/bin/activate
     ```
   - На Windows:
     ```sh
     .\venv\Scripts\activate.bat
     ```

4. **Установите зависимости**:
   ```sh
   pip install -r requirements.txt
   ```

#### Через PyCharm

1. **Склонируйте репозиторий**:
   - `File -> Project from Version Control -> Git`

2. **Установите зависимости**:
   - `File -> Settings -> Project Interpreter` и выберите виртуальное окружение.
   - Либо через терминал в PyCharm:
     ```sh
     pip install -r requirements.txt
     ```

### Создание Django проекта

1. **Создайте проект**:
   ```sh
   django-admin startproject itg .
   ```

**Объяснение:**
- `django-admin startproject itg .` — создает новый проект Django с именем `itg` в текущей директории. Точка в конце команды означает, что проект будет создан в текущей директории, без создания дополнительной директории с именем проекта.

2. **Сделайте коммит**:
   ```sh
   git add .
   git commit -m "Урок 1: создаём django проект"
   ```

### Запуск проекта

1. **Запустите сервер**:
   ```sh
   python manage.py runserver
   ```

**Объяснение:**
- `python manage.py runserver` — запускает встроенный сервер разработки Django.

2. **Остановите сервер**:
   - Используйте комбинацию клавиш `Ctrl+C`.

### Команды терминала

- `python manage.py runserver` — запуск сервера.
- `cd` — смена директории.
- `cd ..` — переход на уровень выше.
- `ls` — просмотр содержимого директории.
- `pwd` — показать текущую директорию.

3. **Сделайте коммит**:
   ```sh
   git add .
   git commit -m "Урок 1: запускаем django сервер"
   ```

### Что такое Django приложение?

Django приложение — это модуль, который выполняет определенную функцию в вашем проекте. Приложение может включать в себя модели, представления, шаблоны и статические файлы. Приложения могут быть повторно использованы в разных проектах, что делает их модульными и гибкими.

### Создание приложения

1. **Создайте приложение**:
   ```sh
   python manage.py startapp news
   ```

**Объяснение:**
- `python manage.py startapp news` — создает новое приложение Django с именем `news`.

2. **Зарегистрируйте приложение в `settings.py`**:
   ```python
   INSTALLED_APPS = [
       ...
       'news',
   ]
   ```

**Объяснение:**
- `INSTALLED_APPS` — список всех приложений, которые используются в проекте. Добавление `'news'` в этот список регистрирует новое приложение.

3. **Сделайте коммит**:
   ```sh
   git add .
   git commit -m "Урок 1: создаём django_app news"
   ```

### Создание первого представления

1. **Создайте представление в `views.py`**:
   ```python
   from django.http import HttpResponse

   def main(request):
       return HttpResponse("Hello, world!")
   ```

**Объяснение:**
- `main` — это представление, которое принимает запрос и возвращает ответ.
- `HttpResponse("Hello, world!")` — создает HTTP-ответ с текстом "Hello, world!".

2. **Зарегистрируйте представление в `urls.py`**:
   ```python
   from django.urls import path
   from . import views

   urlpatterns = [
       path('', views.main),
   ]
   ```

**Объяснение:**
- `path('', views.main)` — создает маршрут для корневого URL (`/`), который будет обрабатываться представлением `main`.

3. **Сделайте коммит**:
   ```sh
   git add .
   git commit -m "Урок 1: создаём первый маршрут и первое представление"
   ```

## Дополнительные знания

### Виртуальное окружение

Виртуальное окружение — это изолированная среда для Python-проектов, которая позволяет устанавливать зависимости независимо от глобальной установки Python. Это помогает избежать конфликтов между зависимостями разных проектов. Виртуальное окружение создается с помощью команды `python -m venv venv` и активируется с помощью команды `source venv/bin/activate` на Linux/MacOS или `.\venv\Scripts\activate.bat` на Windows.

### Git и GitHub

Git — это система контроля версий, которая позволяет отслеживать изменения в коде и управлять ими. GitHub — это платформа для хостинга Git-репозиториев, которая предоставляет удобный интерфейс для работы с Git. Git позволяет создавать ветки для разработки новых функций, объединять изменения из разных веток и отслеживать историю изменений.

### Примеры на аналогиях

- **Django** — это как строительная площадка, где уже есть все необходимые инструменты и материалы для постройки дома (веб-приложения).
- **Модель** — это как чертеж дома, который описывает, какие комнаты и где будут расположены.
- **Шаблон** — это как интерьер дома, который определяет, как будут выглядеть комнаты.
- **Представление** — это как менеджер строительства, который координирует работу строителей и обеспечивает, чтобы все было сделано правильно.

## Заключение

На этом первый урок по Django завершен. Мы создали проект, настроили виртуальное окружение, создали первое приложение и представление. В следующих уроках мы будем углубляться в возможности Django и создавать более сложные веб-приложения. Удачи в изучении!